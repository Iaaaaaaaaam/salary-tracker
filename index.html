<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>æ¯ç§’è–ªæ°´æ˜¾ç¤ºå™¨</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding-top: 50px; }
    input, button { font-size: 20px; padding: 5px; margin: 5px; }
    h2 { font-size: 32px; margin-top: 30px; }
  </style>
</head>
<body>

  <h1>ğŸ’° å®æ—¶æ¯ç§’è–ªæ°´æ˜¾ç¤ºå™¨</h1>

  <!-- ç™»å½•/æ³¨å†ŒåŒºåŸŸ -->
  <div id="loginArea">
    <p>è¯·è¾“å…¥ç”¨æˆ·åç™»å½•ï¼ˆæ— éœ€å¯†ç ï¼‰ï¼š</p>
    <input type="text" id="usernameInput" placeholder="ç”¨æˆ·å">
    <button onclick="login()">ç™»å½•</button>
  </div>

  <!-- ä¸»ç•Œé¢åŒºåŸŸ -->
  <div id="mainArea" style="display:none;">
    <p>å½“å‰ç”¨æˆ·ï¼š<span id="currentUser"></span></p>
    <p>æœˆè–ªï¼ˆå…ƒï¼‰ï¼š<input type="number" id="salaryInput" placeholder="å¦‚ 10000"></p>
    <button onclick="setSalary()">æ›´æ–°æœˆè–ª</button>

    <h2 id="output">ä½ ç°åœ¨å·²ç»èµšäº†ï¼šÂ¥0.00</h2>
  </div>

  <script>
    let intervalId;

    function login() {
      const username = document.getElementById('usernameInput').value.trim();
      if (!username) return alert("è¯·è¾“å…¥ç”¨æˆ·å");

      localStorage.setItem('username', username);
      document.getElementById('loginArea').style.display = 'none';
      document.getElementById('mainArea').style.display = 'block';
      document.getElementById('currentUser').innerText = username;

      loadUserData();
    }

    function setSalary() {
      const salary = parseFloat(document.getElementById('salaryInput').value);
      if (isNaN(salary) || salary <= 0) {
        alert("è¯·è¾“å…¥æœ‰æ•ˆæœˆè–ª");
        return;
      }

      const username = localStorage.getItem('username');
      localStorage.setItem(`salary_${username}`, salary);
      localStorage.setItem(`startTime_${username}`, Date.now());
      startCounter();
    }

    function loadUserData() {
      const username = localStorage.getItem('username');
      if (!username) return;

      document.getElementById('loginArea').style.display = 'none';
      document.getElementById('mainArea').style.display = 'block';
      document.getElementById('currentUser').innerText = username;

      const savedSalary = localStorage.getItem(`salary_${username}`);
      const savedStart = localStorage.getItem(`startTime_${username}`);

      if (savedSalary) {
        document.getElementById('salaryInput').value = savedSalary;
        startCounter();
      }
    }

    function startCounter() {
      clearInterval(intervalId);
      const username = localStorage.getItem('username');
      const salary = parseFloat(localStorage.getItem(`salary_${username}`));
      const startTime = parseInt(localStorage.getItem(`startTime_${username}`));
      if (!salary || !startTime) return;

      const perSecond = salary / (30 * 24 * 60 * 60);

      intervalId = setInterval(() => {
        const now = Date.now();
        const secondsPassed = (now - startTime) / 1000;
        const earned = perSecond * secondsPassed;
        document.getElementById('output').innerText = `ä½ ç°åœ¨å·²ç»èµšäº†ï¼šÂ¥${earned.toFixed(2)}`;
      }, 1000);
    }

    // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨ç™»å½•ï¼ˆå¦‚æœæœ‰è®°å½•ï¼‰
    window.onload = function() {
      if (localStorage.getItem('username')) {
        login();
      }
    };
  </script>

</body>
</html>
